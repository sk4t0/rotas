{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n// window._ = require('lodash');\nvar notifications = [];\nvar totNotifications = 0;\n\nvar NOTIFICATION_TYPES = {\n    permissions: 'App\\\\Notifications\\\\NewPermission'\n};\n\n$(document).ready(function () {\n    // check if there's a logged in user\n    if (Laravel.userId) {\n        $.get('/' + Laravel.adminRoute + '/notifications', function (data) {\n            showNotifications(data, \"#notifications\");\n            totNotifications = data.length;\n        });\n        setInterval(function () {\n            $.get('/' + Laravel.adminRoute + '/notifications', function (data) {\n                addNotifications(data, \"#notifications\");\n            });\n        }, 10000);\n    }\n});\n\nfunction addNotifications(newNotifications, target) {\n    notifications = newNotifications;\n    if (notifications.length > totNotifications) {\n        var totNew = notifications.length - totNotifications;\n        totNotifications = notifications.length;\n\n        (function ($) {\n            $('body').pgNotification({\n                style: 'circle',\n                title: 'Notifications',\n                message: \"You have \" + totNew + \" new notifications\",\n                position: \"top-right\",\n                timeout: 10000,\n                type: \"success\",\n                thumbnail: '<img width=\"40\" height=\"40\" style=\"display: inline-block;\" src=\"' + Laravel.imageNoti + '\" data-src=\"assets/img/profiles/avatar.jpg\" data-src-retina=\"assets/img/profiles/avatar2x.jpg\" alt=\"\">'\n            }).show();\n        })(window.jQuery);\n    }\n    showNotifications(notifications, target);\n}\n\nfunction showNotifications(notifications, target) {\n    if (notifications.length) {\n        var htmlElements = notifications.map(function (notification) {\n            return makeNotification(notification);\n        });\n        $(target + 'Menu').html(htmlElements.join(''));\n        $(target).addClass('has-notifications');\n        $(target + 'Count').html(notifications.length).removeClass('hidden');\n        $(target + 'Count2').html(notifications.length);\n    } else {\n        $(target + 'Menu').html('<li class=\"dropdown-header\">No notifications</li>');\n        $(target).removeClass('has-notifications');\n        $(target + 'Count').addClass('hidden');\n        $(target + 'Count2').html(0);\n    }\n}\n\n// Make a single notification string\nfunction makeNotification(notification) {\n    var to = routeNotification(notification);\n    var notificationText = makeNotificationText(notification);\n    var icon = makeNotificationIcon(notification);\n    return '<li><a href=\"' + to + '\"><i class=\"fa fa-' + icon + ' text-aqua\"></i>' + notificationText + '</a></li>';\n}\n\n// get the notification route based on it's type\nfunction routeNotification(notification) {\n    var to = notification.data.action + '?read=' + notification.id;\n    return to;\n}\n\n// get the notification text based on it's type\nfunction makeNotificationText(notification) {\n    var text = notification.data.message;\n    return text;\n}\n\n// get the notification text based on it's type\nfunction makeNotificationIcon(notification) {\n    var icon = '';\n    if (notification.data.icon) {\n        icon = notification.data.icon;\n    } else {\n        icon = 'info-circle';\n    }\n    return icon;\n}\n\n},{}]},{},[1]);\n"],"file":"app.js"}